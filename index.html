<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="shortcut icon" type="image/jpeg" href="favicon"/>

    <title>You are loved.</Title>
  </head>

  <body class="content">
    <h1 class="name">
      You are invited to a wine party.
    </h1>

    <h2>We hope you will join us.</h2>

    <div id="darkmode-toggle" onclick="colour_toggle()">
      <i id="darkmode-toggle-text">I prefer the dark</i>
    </div>

    <h2 id="rules"><i>Rules</i></h2>
    hello. thanks for coming! we appreciate you 
    We love you.

  </body>

  <script>
    const randInt = max => Math.floor(Math.random() * max)

    const colour_toggle = () => {
      let opts = ["I prefer the dark", "I prefer colour", "I prefer the light"]

      let init_val = document.getElementById("darkmode-toggle-text").textContent
      let current_val = opts.indexOf(init_val)
      let next_val = 1 + current_val == opts.length ? 0 : 1 + current_val

      let bgc = ""
      let c = ""
      if (next_val == 0) {
        bgc = ""
        c = ""
      } else if (next_val == 1) {
        bgc = "#000"
        c = "#BBB"
      } else if (next_val == 2) {
        let [r, g, b] = [randInt(255), randInt(255), randInt(255)]
        bgc = `rgb(${r},${g},${b})`
        c = r * 0.299 + g * 0.587 + b * 0.114 > 186 ? "#222" : "#EEE"
      }

      document.body.style.color = c
      document.body.style.backgroundColor = bgc
      document.getElementById("darkmode-toggle-text").textContent = opts[next_val]
    }

    let dark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    if (dark) {
      colour_toggle()
    }

  </script>

</html>
